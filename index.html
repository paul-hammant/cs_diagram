<html>
<head>
    <title>Client Side Diagramming</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://unpkg.com/jquery.terminal/js/jquery.terminal.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/jquery.terminal/css/jquery.terminal.min.css"/>
</head>
<body>
    <h1>Client Side Diagramming (walking skeleton)</h1>
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" viewBox="112.5 82.5 736 70" width="736" height="70">
    <defs/>
    <metadata> Produced by OmniGraffle 7.20\n2022-07-25 10:41:20 +0000</metadata>
    <g id="toolbar" fill-opacity="1" stroke="none" stroke-dasharray="none" stroke-opacity="1" fill="none">
        <title>toolbar</title>
        <g id="toolbar_Layer_1">
            <title>Layer 1</title>
            <g id="Graphic_11">
                <rect x="113" y="83" width="735" height="69" fill="white"/>
                <rect x="113" y="83" width="735" height="69" stroke="gray" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
                <text transform="translate(118 88)" fill="white">
                    <tspan font-family="Helvetica Neue" font-size="16" fill="black" x="343.836" y="15">Tools</tspan>
                </text>
            </g>
            <g id="fill_color_red">
                <rect x="128" y="99.5" width="114" height="36" fill="red"/>
                <rect x="128" y="99.5" width="114" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
                <text transform="translate(133 108.276)" fill="green">
                    <!-- sand boxed iframe here -->
                    <tspan font-family="Helvetica Neue" font-size="16" fill="white" x="3" y="15">Fill Color: Red</tspan>
                </text>
            </g>
        </g>
    </g>
</svg>

<hr>
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" viewBox="101.5 232.5 689 234" width="689" height="234">
    <defs/>
    <metadata> Produced by OmniGraffle 7.20\n2022-07-25 10:36:02 +0000</metadata>
    <g id="Canvas" fill-opacity="1" stroke="none" stroke-dasharray="none" stroke-opacity="1" fill="none">
        <title>Canvas</title>
        <g id="Canvas_Layer_1">
            <title>Layer 1</title>
            <g id="Graphic_2">
                <rect x="102" y="233" width="169" height="158" fill="purple"/>
                <rect x="102" y="233" width="169" height="158" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
            </g>
            <g id="Graphic_4">
                <ellipse cx="367" cy="282.5" rx="6.00000958741143" ry="34.5000551276154" fill="yellow"/>
                <ellipse cx="367" cy="282.5" rx="6.00000958741143" ry="34.5000551276154" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
            </g>
            <g id="Graphic_5">
                <ellipse cx="552" cy="313" rx="102.000162985993" ry="52.0000830908986" fill="green"/>
                <ellipse cx="552" cy="313" rx="102.000162985993" ry="52.0000830908986" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
            </g>
            <g id="Graphic_6">
                <path d="M 430 346 L 490 406 L 430 466 L 370 406 Z" fill="red"/>
                <path d="M 430 346 L 490 406 L 430 466 L 370 406 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
            </g>
            <g id="Graphic_7">
                <path d="M 730 261 L 743.4708 302.45898 L 787.0634 302.45898 L 751.7963 328.08204 L 765.2671 369.541 L 730 343.91796 L 694.7329 369.541 L 708.2037 328.08204 L 672.9366 302.45898 L 716.5292 302.45898 Z" fill="blue"/>
                <path d="M 730 261 L 743.4708 302.45898 L 787.0634 302.45898 L 751.7963 328.08204 L 765.2671 369.541 L 730 343.91796 L 694.7329 369.541 L 708.2037 328.08204 L 672.9366 302.45898 L 716.5292 302.45898 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
            </g>
        </g>
    </g>
</svg>
<hr>
    <p>Source in <a href="https://github.com/paul-hammant/cs_diagram/">GitHub Repo</a> ... don't hold your breath</p>
    <div style="max-height: 100px" id="term"></div>
</body>
<script>
    function fillWithColor(color) {
        $('#canvas [fill]').attr('fill', color);
    }

$('#term').terminal({
    hello: function(what) {
        this.echo('Hello, ' + what +
                  '. Wellcome to this terminal.');
    },
    fill: function(color) {
        // var top = 0;
        // $('* [color]').each(function( index ) {
        //     if (parseFloat($(this).attr('y')) > top) {
        //         top = parseFloat($(this).attr('y'));
        //         console.log('top1=' + top);
        //     }
        // });
        //
        // $('#canvas [cy]').each(function( index ) {
        //     var path = $(this).attr('d');
        //     if (parseFloat($(this).attr('cy')) + parseFloat($(this).attr('ry')) > top) {
        //         top = parseFloat($(this).attr('cy')) + parseFloat($(this).attr('ry'));
        //         console.log('top2=' + top);
        //     }
        // });
        //
        //  $('#canvas [d]').each(function( index ) {
        //     var terms = $(this).attr('d').split(' ');
        //     var last = 0;
        //     var beforeThat = 0;
        //     terms.forEach(function(term) {
        //         if (isNaN(beforeThat)) {
        //             if (parseFloat(term) > top) {
        //                 top = parseFloat(term);
        //                 console.log('top3=' + top);
        //             }
        //         }
        //         beforeThat = last;
        //         last = parseFloat(term);
        //     });
        // });
        //
        // this.echo('top=' + top);
        fillWithColor(color);
    }
}, {
    greetings: 'Terminal - type fill <color-name> here'
});

$('#fill_color_red').click(function() {
    fillWithColor('red');
});
</script>    
</html>
